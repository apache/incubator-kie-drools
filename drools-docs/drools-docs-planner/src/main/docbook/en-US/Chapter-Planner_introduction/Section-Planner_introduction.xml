<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd
                             http://www.w3.org/1999/xlink http://www.docbook.org/xml/5.0/xsd/xlink.xsd"
         version="5.0" xml:base="./">

  <title>Solver introduction</title>

  <section>
    <title>What is drools-solver?</title>

    <para><emphasis role="bold">Drools-solver solves planning problems</emphasis> by combining a search algorithm with
    the power of the drools rule engine. Good examples of such planning problems include:</para>

    <itemizedlist>
      <listitem>
        <para>Employee shift rostering</para>
      </listitem>

      <listitem>
        <para>Freight routing</para>
      </listitem>

      <listitem>
        <para>Supply sorting</para>
      </listitem>

      <listitem>
        <para>Lesson scheduling</para>
      </listitem>

      <listitem>
        <para>Exam scheduling</para>
      </listitem>

      <listitem>
        <para>Bin packaging</para>
      </listitem>

      <listitem>
        <para><link xlink:href="http://en.wikipedia.org/wiki/Travelling_salesman_problem">The traveling salesman
        problem</link></para>
      </listitem>

      <listitem>
        <para><link xlink:href="http://mat.gsia.cmu.edu/TOURN/">The traveling tournament problem</link></para>
      </listitem>

      <listitem>
        <para>Miss manners too (although the drools-solver example solves this differently than the pure drools rule
        engine example)</para>
      </listitem>
    </itemizedlist>

    <para>A planning problem consists out of a number of constraints. Generally, there are 3 types of
    constraints:</para>

    <itemizedlist>
      <listitem>
        <para>A <emphasis>(negative) hard constraint</emphasis> must not be broken. For example: <emphasis>1 teacher can
        not teach 2 different lessons at the same time</emphasis>.</para>
      </listitem>

      <listitem>
        <para>A <emphasis>(negative) soft constraint</emphasis> should not be broken if it can be avoided. For example:
        <emphasis>Teacher A does not like to teach on Friday afternoon</emphasis>.</para>
      </listitem>

      <listitem>
        <para>A <emphasis>positive constraint (or reward)</emphasis> should be fulfilled if possible. For example:
        <emphasis>Teacher B likes to teach on Monday morning</emphasis>.</para>
      </listitem>
    </itemizedlist>

    <para>These constraints define the <emphasis>score function</emphasis> of a planning problem. This is where the
    drools rule engine comes into play: <emphasis role="bold">adding constraints with score rules is easy and
    scalable</emphasis>.</para>

    <para>A planning problem has a number of <emphasis>solutions</emphasis>. Each solution has a score. There are 3
    categories of solutions:</para>

    <itemizedlist>
      <listitem>
        <para>A <emphasis>possible solution</emphasis> is a solution that does or does not break any number of
        constraints. Planning problems tend to have a incredibly large number of possible solutions. Most of those
        solutions are worthless.</para>
      </listitem>

      <listitem>
        <para>A <emphasis>feasible solution</emphasis> is a solution that does not break any (negative) hard
        constraints. The number of feasible solutions tends to be relative to the number of possible solutions.
        Sometimes there are no feasible solutions. Every feasible solution is a possible solution.</para>
      </listitem>

      <listitem>
        <para>An <emphasis>optimal solution</emphasis> is a solution with the highest score. Planning problems tend to
        have 1 or a few optimal solutions. There is always at least 1 optimal solution, even in the remote case that
        it's not a feasible solution because there are no feasible solutions.</para>
      </listitem>
    </itemizedlist>

    <para>Drools-solver supports several search algorithms to efficiently wade through the incredbly large number of
    possible solutions. <emphasis role="bold">It makes it easy to switch the search algorithm</emphasis>, by simply
    changing the solver configuration.</para>
  </section>

  <section>
    <title>Status of drools-solver</title>

    <para>Drools-solver is a beta module of Drools. The API is almost stable but backward incompatible changes can
    occur. With the recipe called <filename>UpgradeFromPreviousVersionRecipe.txt</filename> you can easily upgrade and
    deal with any backwards incompatible changes between versions. You can find this recipe in subversion and in every
    release.</para>

    <para>Drools-solver, like Drools, is open source software under the Apache Software License.</para>
  </section>

  <section>
    <title>Getting drools-solver and running the examples</title>

    <section>
      <title>Getting the release package and running the examples</title>

      <para>You can download a release of drools-solver from <link
      xlink:href="http://www.jboss.org/drools/downloads.html">the drools download site</link>. To run an example, just
      run the script (<filename>runExamples.sh</filename> on linux or <filename>runExamples.bat</filename> on windows)
      and pick an example:</para>

      <programlisting>$ ./runExamples.sh</programlisting>
    </section>

    <section>
      <title>Get it with maven 2</title>

      <para>The drools-solver jars are available on <link xlink:href="http://repository.jboss.com/maven2/">the jboss
      maven repository</link>. If you use maven 2, just add a dependency to <literal>drools-solver-core</literal> in
      your project's <filename>pom.xml</filename>:</para>

      <programlisting>    &lt;dependency&gt;
        &lt;groupId&gt;org.drools.solver&lt;/groupId&gt;
        &lt;artifactId&gt;drools-solver-core&lt;/artifactId&gt;
        &lt;version&gt;5.x&lt;/version&gt;
    &lt;/dependency&gt;</programlisting>

      <para>You might also need to add the jboss repository in your respository manager (nexus, archiva, ...) or your
      <filename>~/settings.xml</filename>:</para>

      <programlisting>    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;repository.jboss.org&lt;/id&gt;
            &lt;url&gt;http://repository.jboss.org/maven2&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
            &lt;releases&gt;
               &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/releases&gt;
        &lt;/repository&gt;
        ...
    &lt;/repositories&gt;</programlisting>
    </section>

    <section>
      <title>Build it from source</title>

      <para>You can also easily build it from source yourself. Checkout drools from subversion and do a maven 2
      build:</para>

      <programlisting>$ svn checkout http://anonsvn.jboss.org/repos/labs/labs/jbossrules/trunk/ drools
...
$ cd drools
$ mvn -DskipTests clean install
...</programlisting>

      <para>After that, you can run any example directly from the command line, just run this command and pick an
      example:</para>

      <programlisting>$ cd drools-solver/drools-solver-examples/
$ mvn exec:exec -Dexec.mainClass="org.drools.solver.examples.app.ExamplesApp"
...</programlisting>
    </section>
  </section>

  <section>
    <title>Questions, issues and patches</title>

    <para>Your questions are welcome on <link xlink:href="http://www.jboss.org/drools/lists.html">the user mailing
    list</link>. You can read/write to the mailing list without littering your mailbox through <link
    xlink:href="nntp://news.gmane.org/gmane.comp.java.drools.user">this newsgroup</link>.</para>

    <para>Feel free to report an issue (such as a bug, improvement or a new feature request) for the drools-solver code
    or for this manual to <link xlink:href="https://jira.jboss.org/jira/browse/JBRULES">the drools JIRA</link>. Select
    the component <literal>drools-solver</literal>.</para>

    <para>Patches are very welcome and get priority treatment! Attach them to a JIRA issue and optionally send a mail to
    the dev mailing list to get the issue fixed fast. By open sourcing your improvements, you 'll benefit from
    improvements made upon your improvements.</para>
  </section>
</chapter>
